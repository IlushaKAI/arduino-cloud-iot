# Теория

    Цели занятия:
    1. Научится работать в arduino cloud
    2. Сделать приложение по сбору данных с датчика dht11

# Практика

Переходим на https://cloud.arduino.cc/ и нажимаем get started for free

Затем регистрируемся(Не забываем нажать register(маленькая ссылка внизу)) при помощи почты

После регистрации заходим во вкладку devices и выбираем thirdparty device
![|490x256](images/занятие%20cloud%20arduino%20iot-1744898017965.png)

Можете загрузить pdf и наконец завершить добавление устройства

Затем переходим во вкладку things, там нам нужно будет добавить так называемые облачные переменные следующих типов и соответствующих названий:
![|419x207](images/занятие%20cloud%20arduino%20iot-1744898411414.png)

Затем переходим во вкладку Dashboards и выбираем create new dashboard. Нас закидывает в пустое поле, чтобы редактировать панель элементов нужно нажать кнопку edit и начать добавлять и настраивать их. Влажность это виджет percentage, температура - gauge, график - chart, светодиод - switch. И привязываем к ним соответствующие облачные переменные
На данном этапе также можно адаптировать приложение под мобильный вид
![|439x453](images/занятие%20cloud%20arduino%20iot-1744898489695.png)

Переходим обратно в things и переходим вкладку sketch и пишем примерно такой код.

```cpp
/*
  Sketch generated by the Arduino IoT Cloud Thing "Untitled"
  https://create.arduino.cc/cloud/things/86b3b299-e286-48f4-b246-84cbefe14e3c

  Arduino IoT Cloud Variables description

  The following variables are automatically generated and updated when changes are made to the Thing

  CloudLight led;
  CloudTemperatureSensor temperature;
  CloudRelativeHumidity humididty;

  Variables which are marked as READ/WRITE in the Cloud Thing will also have functions
  which are called when their values are changed from the Dashboard.
  These functions are generated with the Thing and added at the end of this sketch.
*/

#include "thingProperties.h"
#include "DHT.h"
#define DHTPIN 32
#define DHTTYPE DHT11
DHT dht(DHTPIN, DHTTYPE);

void setup() {
  // Initialize serial and wait for port to open:
  Serial.begin(115200);
  pinMode(2,OUTPUT);
  dht.begin();
  // This delay gives the chance to wait for a Serial Monitor without blocking if none is found
  delay(1500);

  // Defined in thingProperties.h
  initProperties();

  // Connect to Arduino IoT Cloud
  ArduinoCloud.begin(ArduinoIoTPreferredConnection);

  /*
     The following function allows you to obtain more information
     related to the state of network and IoT Cloud connection and errors
     the higher number the more granular information you’ll get.
     The default is 0 (only errors).
     Maximum is 4
 */
  setDebugMessageLevel(2);
  ArduinoCloud.printDebugInfo();
}

void loop() {
  ArduinoCloud.update();
  // Your code here
  DHT_SENSOR_READ();
}
/*
  Since Led is READ_WRITE variable, onLedChange() is
  executed every time a new value is received from IoT Cloud.
*/
void onLedChange()  {
  // Add your code here to act upon Led change
  if(led == 1){
    digitalWrite(2,HIGH);
  }
  else{
    digitalWrite(2,LOW);
  }
}
void DHT_SENSOR_READ(){
   float h = dht.readHumidity();
  // Read temperature as Celsius (the default)
  float t = dht.readTemperature();
  humididty = h;
  temperature = t;
  Serial.print(F("Humidity: "));
  Serial.println(h);
  Serial.print(F("%  Temperature: "));
  Serial.println(t);
}
```

Для возможности загрузки кода на плату необходимо установить агента ардуино по ссылке
https://cloud.arduino.cc/download-agent
